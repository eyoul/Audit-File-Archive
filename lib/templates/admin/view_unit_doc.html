{% extends 'admin/layout.html' %}

{% block content %}
  <h1>Units Documents</h1>
  <a href="{{ url_for('post.add_unit_file') }}">Add Unit Document</a>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Document Type</th>
        <th>Unit</th>
        <th>File</th>
        <th>Update</th>
        {% if g.user['role_id'] == 1 %}
        <th>Remove</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for document in documents %}
        <tr>
          <td>{{ document.name }}</td>
          <td>{{ document.description }}</td>
          <td>{{ document.docType_name }}</td>
          <td>{{ document.unit_name }}</td>
          <td><a href="{{ url_for('post.download_file', filename=document.file_path) }}" target="_blank">Download</a></td>
          <td>
            <a href="{{ url_for('post.edit_unit_file', doc_id=document['id']) }}" class="btn btn-primary">Edit</a>
          </td>
          {% if g.user['role_id'] == 1 %}
          <td>  
            <form action="{{ url_for('post.delete_unit_file', id=document.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this file?')">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}